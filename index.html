<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MW AI Concierge</title>

  <style>
    :root{
      --blue:#2926EF;
      --gold:#C28B00;
      --bg:#060A12;
      --panel: rgba(10,14,24,.78);
      --stroke: rgba(234,240,255,.18);
      --text:#EAF0FF;
      --muted: rgba(234,240,255,.75);
      --shadow: rgba(0,0,0,.55);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 30% 10%, rgba(41,38,239,.25), transparent 60%),
        radial-gradient(900px 500px at 80% 30%, rgba(194,139,0,.16), transparent 55%),
        linear-gradient(180deg, #070A15, #04060D 70%);
    }
    .wrap{ max-width:1100px; margin:0 auto; padding:28px 18px 40px; }
    .hero{ text-align:center; margin:18px 0 18px; }
    .title{ font-size:56px; line-height:1.05; letter-spacing:.5px; margin:0; font-weight:800; }
    .subtitle{ margin:10px 0 0; color:var(--muted); font-size:16px; }

    .panel{
      margin:22px auto 0;
      padding:18px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(10,14,24,.86), rgba(10,14,24,.58));
      border:1px solid var(--stroke);
      box-shadow: 0 18px 60px var(--shadow);
    }

    .topRow{
      display:flex; gap:14px; justify-content:center; flex-wrap:wrap; margin-bottom:14px;
    }
    .bigBtn{
      min-width:280px; max-width:520px; flex:1 1 360px;
      padding:14px 16px; border-radius:14px;
      border:1px solid rgba(194,139,0,.65);
      background: linear-gradient(180deg, rgba(41,38,239,.55), rgba(41,38,239,.22));
      color:var(--text);
      font-weight:800;
      letter-spacing:.2px;
      font-size:18px;
      cursor:pointer;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
    }
    .bigBtn:active{ transform: translateY(1px); }

    .statusRow{
      display:flex; gap:12px; align-items:center; flex-wrap:wrap;
      margin:10px 0 12px; justify-content:flex-start;
    }
    .badge{
      display:inline-flex; gap:10px; align-items:center;
      padding:10px 12px; border-radius:14px;
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.08);
      color:var(--muted); font-weight:700;
    }
    .toggle{
      display:inline-flex; gap:10px; align-items:center;
      padding:10px 12px; border-radius:14px;
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.08);
      color:var(--muted); user-select:none;
    }
    .toggle input{ transform: scale(1.1); }

    .chatBox{
      border-radius:16px; padding:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      min-height:240px; max-height:460px;
      overflow:auto;
    }

    .msg{ margin:10px 0; line-height:1.55; font-size:16px; }
    .who{ font-weight:900; margin-right:6px; }
    .who.wizard{ color:#FFFFFF; }
    .who.you{ color:rgba(234,240,255,.95); }

    .divider{
      margin:14px 0;
      border-top:1px solid rgba(234,240,255,.12);
      opacity:.9;
    }

    .composer{
      margin-top:14px; display:flex; gap:10px; align-items:center;
    }
    .composer input{
      flex:1; padding:14px 14px; border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:var(--text);
      outline:none;
      font-size:16px;
    }
    .composer button{
      padding:14px 16px; border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:var(--text);
      font-weight:800;
      cursor:pointer;
      min-width:96px;
    }
    .composer button:disabled{ opacity:.45; cursor:not-allowed; }

    .footer{
      text-align:center;
      color:rgba(234,240,255,.45);
      font-size:13px;
      margin-top:16px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hero">
      <h1 class="title">MW AI Concierge</h1>
      <div class="subtitle">Powered by Ability3Media</div>
    </div>

    <div class="panel">
      <div class="topRow">
        <button class="bigBtn" id="btnFreedom">Freedom Wellness+ Perks</button>
        <button class="bigBtn" id="btnEco">SeniorLimo Ecosystem</button>
      </div>

      <div class="statusRow">
        <div class="badge"><strong>Wizard:</strong>&nbsp;<span id="statusText">Ready.</span></div>

        <label class="toggle" title="When ON, the Wizard will read answers out loud.">
          <input type="checkbox" id="voiceToggle" />
          <span><strong>Voice</strong></span>
        </label>

        <label class="toggle" title="Slower, softer voice for seniors.">
          <input type="checkbox" id="softToggle" checked />
          <span><strong>Soft Voice</strong></span>
        </label>
      </div>

      <div class="chatBox" id="chatBox" aria-live="polite"></div>

      <div class="composer">
        <input id="userInput" type="text" placeholder="Type a question…" autocomplete="off" />
        <button id="sendBtn">Send</button>
      </div>

      <div class="footer">© 2026 Ability3Media · All Rights Reserved</div>
    </div>
  </div>

  <script>
    // =========================
    // CONTENT — THIS is where perks + ecosystem live
    // Replace these blocks with the EXACT book copy anytime.
    // =========================
    const TOPICS = {
      freedom: {
        title: "Freedom Wellness+ Perks",
        text:
`Freedom Wellness+ is built around real member benefits — not just rides.

Member perks include:
• Priority booking (members get priority over flat-rate riders)
• Birthday breakfast perk
• Access to the Gold Deals coupon network
• Community give-back support (partnered nonprofits/churches)
• Simple, senior-friendly experience (tap buttons, no tech stress)

Important notes:
• Membership is for one person (no family sharing)
• Designed to keep seniors independent and supported — with real local value.`
      },

      ecosystem: {
        title: "SeniorLimo Ecosystem",
        text:
`SeniorLimo is a membership-based affiliate carpool ecosystem designed to support senior mobility, local businesses, and community wellness.

The ecosystem connects:
• Seniors who need reliable rides and meaningful member perks
• Local businesses that provide value through Gold Deals
• Nonprofits and churches supported through community give-back

Together, these partners create a community-supported system that helps seniors stay independent while strengthening the local economy.`
      }
    };

    // =========================
    // UI HELPERS
    // =========================
    const chatBox = document.getElementById("chatBox");
    const userInput = document.getElementById("userInput");
    const sendBtn = document.getElementById("sendBtn");
    const statusText = document.getElementById("statusText");
    const voiceToggle = document.getElementById("voiceToggle");
    const softToggle = document.getElementById("softToggle");

    function addDivider() {
      const div = document.createElement("div");
      div.className = "divider";
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function addMsg(who, text) {
      const row = document.createElement("div");
      row.className = "msg";

      const label = document.createElement("span");
      label.className = "who " + (who === "Wizard" ? "wizard" : "you");
      label.textContent = who + ":";

      const body = document.createElement("span");
      body.textContent = " " + text;

      row.appendChild(label);
      row.appendChild(body);
      chatBox.appendChild(row);

      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // =========================
    // VOICE — make it less robotic (within iOS limits)
    // =========================
    function stopVoice() {
      try { if (window.speechSynthesis) window.speechSynthesis.cancel(); } catch(e){}
    }

    function cleanForSpeech(text) {
      // Make bullets speak better + add pauses
      return (text || "")
        .replaceAll("•", "")
        .replaceAll("—", ", ")
        .replaceAll("\n\n", ".\n")
        .replaceAll("\n", ". ")
        .replace(/\s+/g, " ")
        .trim();
    }

    function pickBestVoice() {
      if (!("speechSynthesis" in window)) return null;
      const voices = window.speechSynthesis.getVoices ? window.speechSynthesis.getVoices() : [];
      if (!voices.length) return null;

      // Try to pick a better iOS voice if available
      const preferred =
        voices.find(v => /Siri/i.test(v.name) && /en/i.test(v.lang)) ||
        voices.find(v => /Enhanced|Premium/i.test(v.name) && /en/i.test(v.lang)) ||
        voices.find(v => /en-US/i.test(v.lang)) ||
        voices.find(v => /en/i.test(v.lang));

      return preferred || null;
    }

    function speak(text) {
      if (!voiceToggle.checked) return;
      if (!("speechSynthesis" in window)) return;

      stopVoice();

      const spoken = cleanForSpeech(text);
      const u = new SpeechSynthesisUtterance(spoken);

      if (softToggle.checked) {
        u.rate = 0.88;   // slower = less robotic
        u.pitch = 0.92;  // slightly lower
        u.volume = 1.0;
      } else {
        u.rate = 0.98;
        u.pitch = 1.0;
        u.volume = 1.0;
      }

      const v = pickBestVoice();
      if (v) u.voice = v;

      window.speechSynthesis.speak(u);
    }

    if ("speechSynthesis" in window) {
      window.speechSynthesis.onvoiceschanged = () => {};
    }

    // =========================
    // ROUTING — typed questions go to correct topic
    // =========================
    function routeQuestion(q) {
      const s = (q || "").toLowerCase();
      if (s.includes("freedom") || s.includes("wellness") || s.includes("perk")) return TOPICS.freedom;
      if (s.includes("ecosystem") || s.includes("seniorlimo")) return TOPICS.ecosystem;

      return {
        title: "Quick Answer",
        text: "Tap a button for the full overview, or ask: “What are the Freedom Wellness+ perks?” or “What is the SeniorLimo ecosystem?”"
      };
    }

    // =========================
    // ACTIONS
    // =========================
    function wizardRespondBlock(title, text) {
      addDivider();
      addMsg("Wizard", title);
      addMsg("Wizard", text);
      speak(title + ". " + text);
      statusText.textContent = "Ready.";
    }

    function handleTopic(topicObj) {
      statusText.textContent = "Answering…";
      wizardRespondBlock(topicObj.title, topicObj.text);
    }

    document.getElementById("btnFreedom").addEventListener("click", () => handleTopic(TOPICS.freedom));
    document.getElementById("btnEco").addEventListener("click", () => handleTopic(TOPICS.ecosystem));

    function send() {
      const q = (userInput.value || "").trim();
      if (!q) return;
      addMsg("You", q);
      userInput.value = "";
      handleTopic(routeQuestion(q));
    }

    sendBtn.addEventListener("click", send);
    userInput.addEventListener("keydown", (e) => { if (e.key === "Enter") send(); });

    // Initial greeting
    addMsg("Wizard", "I am here. Tap a button or ask me a question.");
  </script>
</body>
</html>
