<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MW AI Concierge™</title>
  <style>
    :root{
      --bg1:#070A2A;
      --bg2:#0B1240;
      --panel: rgba(10,14,40,.70);
      --panel2: rgba(20,26,70,.60);
      --border: rgba(255,255,255,.08);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.65);
      --accent: #3A35FF;
      --accent2:#2926EF;
      --shadow: rgba(0,0,0,.40);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 50% -10%, rgba(80,90,255,.35), transparent 60%),
        radial-gradient(900px 600px at 10% 110%, rgba(120,130,255,.25), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:28px 16px 22px;
    }

    .wrap{
      width:min(980px, 100%);
    }

    header{
      text-align:center;
      padding:10px 10px 18px;
    }
    h1{
      margin:0;
      font-size: clamp(28px, 4vw, 44px);
      letter-spacing:.5px;
      font-weight:800;
    }
    .sub{
      margin-top:6px;
      color:var(--muted);
      font-size: 14px;
      letter-spacing:.3px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: 0 20px 60px var(--shadow);
      padding: 18px;
    }

    .topBtns{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-bottom: 14px;
    }
    .bigBtn{
      width:100%;
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(60,70,255,.35), rgba(25,30,90,.30));
      color:var(--text);
      padding: 16px 14px;
      border-radius: 16px;
      font-weight: 700;
      font-size: 16px;
      cursor:pointer;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.12);
    }
    .bigBtn:active{ transform: translateY(1px); }

    .statusRow{
      display:flex;
      gap:12px;
      align-items:center;
      margin: 8px 0 12px;
      flex-wrap:wrap;
    }
    .pill{
      display:flex;
      align-items:center;
      gap:10px;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.10);
      padding: 10px 12px;
      border-radius: 999px;
      min-height: 40px;
    }
    .pill strong{ font-weight:800; }
    .toggle{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius:999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
    }
    .toggle input{ transform: scale(1.15); }

    .chat{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
      padding: 14px;
      min-height: 300px;
      max-height: 420px; /* prevents “infinite scroll forever” */
      overflow:auto;
      line-height:1.35;
    }

    .line{
      margin: 10px 0;
    }
    .who{
      font-weight:800;
      margin-right:8px;
    }
    .wiz{ color: rgba(255,255,255,.90); }
    .you{ color: rgba(160,190,255,.95); }

    .respTitle{
      margin: 10px 0 8px;
      font-weight:800;
    }
    ul{
      margin: 8px 0 0 18px;
      padding:0;
    }
    li{ margin: 6px 0; color: rgba(255,255,255,.90); }

    .inputRow{
      margin-top: 12px;
      display:flex;
      gap:12px;
      align-items:stretch;
    }
    .inputRow input{
      flex:1;
      border-radius: 16px;
      padding: 14px 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
      color: var(--text);
      outline:none;
      font-size: 16px;
    }
    .sendBtn{
      border-radius: 16px;
      padding: 14px 20px;
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(70,75,255,.55), rgba(25,30,90,.35));
      color: var(--text);
      font-weight: 800;
      cursor:pointer;
      min-width: 110px;
    }
    footer{
      text-align:center;
      color: rgba(255,255,255,.55);
      margin-top: 12px;
      font-size: 12px;
      letter-spacing:.2px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>MW AI Concierge™</h1>
      <div class="sub">Powered by Ability3Media™</div>
    </header>

    <div class="card">
      <div class="topBtns">
        <button class="bigBtn" id="btnPerks">Freedom Pass Wellness+ Perks</button>
        <button class="bigBtn" id="btnEco">SeniorLimo Ecosystem</button>
      </div>

      <div class="statusRow">
        <div class="pill"><strong>Wizard:</strong> <span id="status">Ready.</span></div>
        <label class="toggle" title="Turn voice on/off">
          <input id="voiceToggle" type="checkbox" />
          <span>Voice</span>
        </label>
      </div>

      <div class="chat" id="chat"></div>

      <form class="inputRow" id="form">
        <input id="q" type="text" autocomplete="off" placeholder="Tap a button or ask me a question..." />
        <button class="sendBtn" type="submit">Send</button>
      </form>

      <footer>© 2026 Ability3Media • All Rights Reserved</footer>
    </div>
  </div>

<script>
(function(){
  const chat = document.getElementById('chat');
  const statusEl = document.getElementById('status');
  const q = document.getElementById('q');
  const form = document.getElementById('form');
  const voiceToggle = document.getElementById('voiceToggle');

  // === CONTENT (edit these two blocks anytime) ===
  const CONTENT = {
    perks: {
      title: "Freedom Pass Wellness+ — Core Perks",
      body: [
        "Freedom Pass Wellness+ — $299 per month",
        "20 one-way rides included",
        "Priority booking & scheduling",
        "Professional concierge support (no tipping required)",
        "Spouse ride-along eligible",
        "+1 guest ride once per week",
        "$25 Wellness Credit for each referred Freedom Pass Wellness+™ member",
        "Birthday breakfast for two (member + spouse)",
        "Gold Deals™ action coupons (15%–50% value)",
        "Emergency contact & wellness safeguard",
        "",
        "One platform membership.",
      ]
    },
    ecosystem: {
      title: "The SeniorLimo Ecosystem — Business Benefits",
      body: [
        "Businesses partner into the SeniorLimo community platform",
        "Gold Deals™ drives action-based offers seniors actually use",
        "Freedom Pass Wellness+ members become repeat customers",
        "Concierge support helps convert “interest” into real visits",
        "Local goodwill + community wellness positioning",
        "Ongoing visibility inside the SeniorLimo rider experience"
      ]
    }
  };

  // --- Voice ---
  function speak(text){
    if(!voiceToggle.checked) return;
    if(!('speechSynthesis' in window)) return;
    try{
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.rate = 1.0;
      u.pitch = 1.0;
      window.speechSynthesis.speak(u);
    }catch(e){}
  }

  // --- Rendering (IMPORTANT: we DO NOT keep infinite history) ---
  function setStatus(txt){ statusEl.textContent = txt; }

  function clearChat(){
    chat.innerHTML = "";
  }

  function addLine(whoClass, whoLabel, text){
    const div = document.createElement('div');
    div.className = 'line';
    div.innerHTML = `<span class="who ${whoClass}">${whoLabel}</span> ${escapeHtml(text)}`;
    chat.appendChild(div);
  }

  function addResponseBlock(title, bullets){
    const t = document.createElement('div');
    t.className = 'respTitle';
    t.textContent = title;
    chat.appendChild(t);

    const ul = document.createElement('ul');
    bullets
      .filter(x => x !== null && x !== undefined)
      .map(x => String(x))
      .forEach(item => {
        if(item.trim() === ""){
          // blank line spacer
          const li = document.createElement('li');
          li.style.listStyle = "none";
          li.style.margin = "10px 0";
          li.textContent = "";
          ul.appendChild(li);
        } else {
          const li = document.createElement('li');
          li.textContent = item;
          ul.appendChild(li);
        }
      });
    chat.appendChild(ul);
  }

  function showResponse(kind){
    // This is the key: every tap/query starts “fresh”, no forever-scroll.
    clearChat();

    addLine('wiz', 'Wizard:', "I am here. Tap a button or ask me a question.");

    if(kind === 'perks'){
      addLine('you', 'You:', "Freedom Pass Wellness+ Perks");
      addLine('wiz', 'Wizard:', CONTENT.perks.title);
      addResponseBlock(CONTENT.perks.title, CONTENT.perks.body);
      speak(`${CONTENT.perks.title}. ${CONTENT.perks.body.join('. ')}`);
      return;
    }

    if(kind === 'ecosystem'){
      addLine('you', 'You:', "SeniorLimo Ecosystem");
      addLine('wiz', 'Wizard:', CONTENT.ecosystem.title);
      addResponseBlock(CONTENT.ecosystem.title, CONTENT.ecosystem.body);
      speak(`${CONTENT.ecosystem.title}. ${CONTENT.ecosystem.body.join('. ')}`);
      return;
    }
  }

  // --- Typed Q&A (simple routing; no “internal notes”, no duplicates) ---
  function handleQuestion(text){
    const t = (text || "").trim();
    if(!t) return;

    clearChat();
    addLine('wiz', 'Wizard:', "I am here. Tap a button or ask me a question.");
    addLine('you', 'You:', t);

    const lc = t.toLowerCase();

    if(lc.includes("freedom pass") || lc.includes("wellness")){
      addLine('wiz','Wizard:', CONTENT.perks.title);
      addResponseBlock(CONTENT.perks.title, CONTENT.perks.body);
      speak(`${CONTENT.perks.title}. ${CONTENT.perks.body.join('. ')}`);
      return;
    }

    if(lc.includes("ecosystem") || lc.includes("seniorlimo")){
      addLine('wiz','Wizard:', CONTENT.ecosystem.title);
      addResponseBlock(CONTENT.ecosystem.title, CONTENT.ecosystem.body);
      speak(`${CONTENT.ecosystem.title}. ${CONTENT.ecosystem.body.join('. ')}`);
      return;
    }

    // fallback (still clean; no debug/internal text)
    addLine('wiz','Wizard:', "Got it. Fastest options:");
    addResponseBlock("Choose one:", [
      "Tap “Freedom Pass Wellness+ Perks” for member benefits",
      "Tap “SeniorLimo Ecosystem” for business benefits",
      "Or type: “What is Freedom Pass?” or “What is the SeniorLimo Ecosystem?”"
    ]);
    speak("Got it. Tap Freedom Pass Wellness Plus Perks for member benefits, or tap SeniorLimo Ecosystem for business benefits.");
  }

  // --- Events ---
  document.getElementById('btnPerks').addEventListener('click', () => showResponse('perks'));
  document.getElementById('btnEco').addEventListener('click', () => showResponse('ecosystem'));

  // IMPORTANT: submit runs once; prevents duplicates
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const text = q.value;
    q.value = "";
    handleQuestion(text);
  });

  // initial paint
  clearChat();
  addLine('wiz', 'Wizard:', "I am here. Tap a button or ask me a question.");
  setStatus("Ready.");
  
  function escapeHtml(str){
    return str
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }
})();
</script>
</body>
</html>
